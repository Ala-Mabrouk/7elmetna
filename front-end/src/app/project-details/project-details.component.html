<div class="container">
  <div class="shadow p-3 mb-5 bg-body rounded mt-5">
    <div class="row">
      <div class="col-4">
        <div class="mt-5">
          <img
            [src]="projectValue.projectThumbNail"
            class="card-img-top p-3"
            [alt]="projectValue.projectFullName"
          />
        </div>
      </div>

      <div class="col-7">
        <h5 class="card-title">{{ projectValue.projectShortName }}</h5>
        <p>
          {{ projectValue.projectFullDesc }}
        </p>
        <div class="ps-5">
          <div class="list-inline">
            <img src="../../assets/icons/donate.svg" class="list-inline-item" />
            <p class="card-text list-inline-item">
              <b>{{ projectValue.nbContributions }}</b> Bailleurs de fond
            </p>
          </div>
          <div class="list-inline">
            <img src="../../assets/icons/timer.svg" class="list-inline-item" />
            <p class="card-text list-inline-item">
              <!-- <b>2</b> Jours <b>6</b> Heures <b>5 </b>minutes restants -->
              {{ projectValue.projectLefttime }}
            </p>
          </div>
          <div class="list-inline">
            <img src="../../assets/icons/money.svg" class="list-inline-item" />
            <p class="card-text list-inline-item">
              <b>Montant sollicité : </b> {{ projectValue.projectDemand }} TND
            </p>
          </div>
        </div>
        <p class="text-end mt-2">
          {{ projectValue.projectEarned }}
          <b>/ {{ projectValue.projectDemand }} TND </b>
        </p>
        <div class="progress">
          <div
            class="progress-bar bg-success"
            role="progressbar"
            [style]="projectValue.projectProgress"
            aria-valuenow=" "
            aria-valuemin="0"
            aria-valuemax="100"
          ></div>
        </div>
      </div>
    </div>
    <br />

    <div class="row">
      <div *ngFor="let progressInfo of progressInfos" class="mb-2">
        <span>{{ progressInfo.fileName }}</span>
        <div class="progress">
          <div
            class="progress-bar progress-bar-info progress-bar-striped"
            role="progressbar"
            attr.aria-valuenow="{{ progressInfo.value }}"
            aria-valuemin="0"
            aria-valuemax="100"
            [ngStyle]="{ width: progressInfo.value + '%' }"
          >
            {{ progressInfo.value }}%
          </div>
        </div>
      </div>

      <div
        class="row"
        *ngIf="
          projectValue.projectEarned != projectValue.projectDemand &&
          projectValue.projectLefttime != 'Temps ecoulé'
        "
      >
        <div class="col-6">
          <form>
            <div class="d-grid gap-2 col-6 mx-auto">
              <div class="mb-3">
                <label for="exampleInputEmail1" class="form-label"
                  >Saisir le montant
                </label>
                <label for="exampleInputEmail1" class="form-label"
                  >max giving is:
                  {{ projectValue.projectDemand - projectValue.projectEarned }}
                  TND
                </label>
                <br />
                <input
                  (keyup)="updateValue($event)"
                  type="number"
                  [max]="
                    projectValue.projectDemand - projectValue.projectEarned
                  "
                  class="form-control"
                  id="exampleInputEmail1"
                  aria-describedby="emailHelp"
                />
              </div>

              <button
                class="btn btn-primary"
                type="submit"
                data-bs-toggle="modal"
                data-bs-target="#exampleModal"
              >
                Generer Qr Code et et Soutenir
              </button>
            </div>
          </form>
          <div class="d-grid gap-2 col-6 mx-auto">
            <br />
            <p class="text-center">ــــــــــ ou bien ــــــــــ</p>
            <button class="btn btn-primary" type="button">
              Remplir le formuaire
            </button>
          </div>

          <div class="d-grid gap-2 col-6 mx-auto">
            <!-- <form [formGroup]="fileUploadForm" (ngSubmit)="onFormSubmit()">
            <div class="row">
              <div class="col-sm-12">
                <div>
                  <h6 class="head-title margin-top-8">
                    <span>Select Image File</span>
                  </h6>
                </div>
              </div>
              <div class="col-sm-6">
                <div class="custom-file">
                  <input
                    type="file"
                    class="custom-file-input"
                    id="customFile"
                    name="uploadedImage"
                    (change)="onFileSelect($event)"
                    #UploadFileInput
                  />

                  <label class="custom-file-label" for="customFile">{{
                    fileInputLabel || "Choose File"
                  }}</label>
                </div>
              </div>

              <div class="col-sm-6">
                <button class="btn btn-primary" type="submit">Upload</button>
              </div>
            </div>
          </form> -->
          </div>
        </div>
        <div class="col-6 mt-5">
          <!-- <iframe
            src="https://www.youtube.com/embed/tgbNymZ7vqY"
            height="200px"
            width="500px"
          >
          </iframe> -->
        </div>
        <div class="mt-5">
          <div *ngIf="projectValue.listMedia">
            <h3 class="card-title text-center">Voir la gallery des photos</h3>
            <div class="row">
              <img
                *ngFor="let media of projectValue.listMedia"
                [src]="'http://localhost:3033/' + media.mediaURL"
                [alt]="media.mediaURL"
                class="col-3"
              />

              <!-- <img [src]="realisation.mediaURL" class="card-img-top"               [alt]="realisation.mediaURL"
        > -->
              <!-- <div class="card-body col-7">
                  <h5 class="card-title">{{ media.addedDate }}</h5>
                  <small class="text-muted text-end">{{
                    media.addedDate
                  }}</small>

                  <p class="card-text">
                    {{ media.addedDate }}
                    This is a wider card with supporting text below as a natural
                    lead-in to additional content. This content is a little bit
                    longer.
                  </p>
                  <p class="card-text"></p>
                </div> -->
            </div>
          </div>
          <br />
        </div>
      </div>
    </div>
    <div class="shadow p-3 mb-5 bg-body rounded">
      <div *ngIf="projectValue.listRealisations">
        <h4 class="card-title">Suivie de Projet</h4>
        <div class="card mb-3">
          <div
            class="row"
            *ngFor="let realisation of projectValue.listRealisations"
          >
            <div class="col-2 text-center">
              <img
                [src]="'http://localhost:3033/' + realisation.rmediaURL"
                class="img-thumbnail"
                alt=""
                style="max-height: 150px; border: none"
              />
            </div>

            <!-- <img [src]="realisation.mediaURL" class="card-img-top"               [alt]="realisation.mediaURL"
        > -->
            <div class="card-body col-9">
              <small class="text-muted text-end">{{
                realisation.addedDate
              }}</small>

              <p class="card-text">
                This is a wider card with supporting text below as a natural
                lead-in to additional content. This content is a little bit
                longer.
              </p>
              <p class="card-text"></p>
            </div>
          </div>
        </div>
      </div>
      <br />
    </div>
  </div>
  <!-- Button trigger modal -->

  <!-- Modal -->
  <div
    class="modal fade"
    id="exampleModal"
    tabindex="-1"
    aria-labelledby="exampleModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">
            Scanner le QR code avec l’application D17
          </h5>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body">
          <div class="alert alert-primary" role="alert">
            Télécharger gratuitement, sur votre Smartphone ou tablette,
            l’application D17 à partir de Google Play ou Apple Store.
          </div>
          <p class="text-center">
            - Scanner le QR code, pour effectuer le paiement de la transaction.
          </p>
          <div class="row">
            <div class="col-3"></div>
            <div class="col-5 ms-4">
              <ngx-qrcode
                [elementType]="elementType"
                [errorCorrectionLevel]="correctionLevel"
                [value]="chartyValue"
                cssClass="bshadow"
              ></ngx-qrcode>
            </div>
          </div>
        </div>
        <div class="alert alert-primary m-2" role="alert">
          Pour chaque transaction réalisée, la somme est débitée instantanément
          de votre porte-monnaie électronique.
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary">Valider</button>
        </div>
      </div>
    </div>
  </div>
</div>
